{% extends "gitgrade/base.html" %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-5">&nbsp;</div>
            <div class="col text-center">
                <div class="
                    card display-1 text-light
                    {% if grades.final_grade.letter_grade.value == 'A' %}bg-success{% endif %}
                    {% if grades.final_grade.letter_grade.value == 'B' %}bg-success{% endif %}
                    {% if grades.final_grade.letter_grade.value == 'C' %}bg-warning{% endif %}
                    {% if grades.final_grade.letter_grade.value == 'D' %}bg-danger{% endif %}
                    {% if grades.final_grade.letter_grade.value == 'F' %}bg-danger{% endif %}
                ">
                    {{ grades.final_grade.letter_grade.value }}
                </div>
            </div>
            <div class="col-5">&nbsp;</div>
        </div>
        <div class="row mt-5 mb-2">
            <div class="col text-center">
                <a
                        href="/result/{{ request.source }}/{{ request.owner }}/{{ request.repo }}"
                        style="text-decoration: none;"
                >
                    {{ request.source }} | {{ request.owner }}/{{ request.repo }}
                </a>
            </div>
        </div>
        <div class="row my-5">
            <div class="col-2">&nbsp;</div>
            <div class="col">
                <table class="table caption-top">
                    <caption>Data Used in Grading</caption>
                    <thead>
                    <tr>
                        <th scope="col">Property</th>
                        <th scope="col">Value</th>
                        <th class="text-center" scope="col">Grade</th>
                        <th class="text-center" scope="col">Weight</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Days Since Create</td>
                        <td>{{ data.contributor.days_since_create }}</td>
                        <td class="text-center">{{ grades.days_since_create.letter_grade.value }}</td>
                        <td class="text-center">x {{ grades.days_since_create.weight_str }}</td>
                    </tr>
{#                    <tr>#}
{#                        <td>Author Count</td>#}
{#                        <td>{{ data.contributor.author_count_all }}</td>#}
{#                        <td class="text-center">{{ grades.author_count_all.letter_grade.value }}</td>#}
{#                        <td class="text-center">x {{ grades.author_count_all.weight_str }}</td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td>Primary Author Commit Count</td>#}
{#                        <td>{{ data.commit_all.count_primary_author }}</td>#}
{#                        <td class="text-center">{{ grades.commit_count_primary_author_all.letter_grade.value }}</td>#}
{#                        <td class="text-center">x {{ grades.commit_count_primary_author_all.weight_str }}</td>#}
{#                    </tr>#}
                    <tr>
                        <td>Days Since Commit</td>
                        <td>{{ data.contributor.days_since_commit }}</td>
                        <td class="text-center">{{ grades.days_since_commit.letter_grade.value }}</td>
                        <td class="text-center">x {{ grades.days_since_commit.weight_str }}</td>
                    </tr>
{#                    <tr>#}
{#                        <td>Typical Time Between All Commits</td>#}
{#                        <td>{{ view.commit_interval_days_all }} Days</td>#}
{#                        <td class="text-center">{{ grades.commit_interval_all.letter_grade.value }}</td>#}
{#                        <td class="text-center">x {{ grades.commit_interval_all.weight_str }}</td>#}
{#                    </tr>#}
                    <tr>
                        <td>Recent Author Count</td>
                        <td>{{ data.contributor.author_count_recent }}</td>
                        <td class="text-center">{{ grades.author_count_recent.letter_grade.value }}</td>
                        <td class="text-center">x {{ grades.author_count_recent.weight_str }}</td>
                    </tr>
                    <tr>
                        <td>Recent Primary Author Commits</td>
                        <td>{{ data.commit_recent.count_primary_author }}</td>
                        <td class="text-center">{{ grades.commit_count_primary_author_recent.letter_grade.value }}</td>
                        <td class="text-center">x {{ grades.commit_count_primary_author_recent.weight_str }}</td>
                    </tr>
                    <tr>
                        <td>Typical Time Between Recent Commits</td>
                        <td>{{ view.commit_interval_days_recent }} Days</td>
                        <td class="text-center">{{ grades.commit_interval_recent.letter_grade.value }}</td>
                        <td class="text-center">x {{ grades.commit_interval_recent.weight_str }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th scope="row">Final Grade</th>
                        <th scope="row">{{ grades.final_grade.raw_number }}%</th>
                        <th scope="row" class="text-center">{{ grades.final_grade.letter_grade.value }}</th>
                        <th scope="row" class="text-center">&nbsp;</th>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-2">&nbsp;</div>
        </div>
        <div class="row">
            <div class="col-2">&nbsp;</div>
            <div class="col">
                <table class="table table-small caption-top">
                    <caption>Other Data Gathered</caption>
                    <thead>
                    <tr>
                        <th scope="col">Property</th>
                        <th scope="col">Value</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Watcher Count</td>
                        <td>{{ data.popularity.watcher_count }}</td>
                    </tr>
                    <tr>
                        <td>Branch Count</td>
                        <td>{{ data.contributor.branch_count }}</td>
                    </tr>
{#                    <tr>#}
{#                        <td>Lines of Code</td>#}
{#                        <td>{{ data.code.lines_of_code }}</td>#}
{#                    </tr>#}
{#                    <tr>#}
{#                        <td>Total Commits</td>#}
{#                        <td>{{ data.commit_all.count }}</td>#}
{#                    </tr>#}
                    <tr>
                        <td>Recent Commits</td>
                        <td>{{ data.commit_recent.count }}</td>
                    </tr>
{#                    <tr>#}
{#                        <td>File Count</td>#}
{#                        <td>{{ data.code.file_count }}</td>#}
{#                    </tr>#}
                    <tr>
                        <td>Pull Requests Open</td>
                        <td>{{ data.pull_request.count_open }}</td>
                    </tr>
                    <tr>
                        <td>Pull Requests Total</td>
                        <td>{{ data.pull_request.count }}</td>
                    </tr>
                    <tr>
                        <td>Open Issues</td>
                        <td>{{ data.popularity.open_issue_count }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-2">&nbsp;</div>

        </div>
    </div>
{% endblock %}